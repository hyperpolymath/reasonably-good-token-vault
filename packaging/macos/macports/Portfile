# SPDX-License-Identifier: AGPL-3.0-or-later
# SPDX-FileCopyrightText: 2025 Hyperpolymath

PortSystem          1.0
PortGroup           github 1.0

github.setup        hyperpolymath reasonable-good-token-vault 0.1.0 v
name                svalinn-vault
revision            0
categories          security
platforms           darwin
license             AGPL-3
maintainers         {hyperpolymath.example:security @hyperpolymath}
description         Post-quantum secure identity vault
long_description    Svalinn Vault provides military-grade protection for \
                    digital identities using post-quantum cryptography \
                    including Kyber-1024 and Dilithium5. Features include \
                    post-quantum key encapsulation, post-quantum signatures, \
                    AES-256-GCM encryption, BLAKE3 hashing, Argon2id key \
                    derivation, GUID-based storage, and chmod 000 lockdown.

homepage            https://github.com/hyperpolymath/reasonable-good-token-vault

checksums           rmd160  PLACEHOLDER \
                    sha256  PLACEHOLDER \
                    size    PLACEHOLDER

depends_build       port:zig \
                    port:ats2

depends_lib         port:openssl3 \
                    port:blake3

use_configure       no

build.dir           ${worksrcpath}/vault-core-ats
build.cmd           zig build && make

destroot {
    xinstall -m 755 ${worksrcpath}/vault-core-ats/svalinn-vault-core \
        ${destroot}${prefix}/bin/svalinn-cli

    xinstall -m 644 ${worksrcpath}/vault-core-ats/zig-out/lib/libsvalinn_crypto.a \
        ${destroot}${prefix}/lib/

    xinstall -d ${destroot}${prefix}/share/doc/${name}
    xinstall -m 644 ${worksrcpath}/README.adoc \
        ${destroot}${prefix}/share/doc/${name}/
}

notes "
WARNING: This is dual-use technology.
Users are responsible for compliance with applicable export control regulations.
See ${prefix}/share/doc/${name}/README.adoc for full documentation.
"
